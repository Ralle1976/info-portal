<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Bulk Hours Test - QR Info Portal</title>
    <script>
        // Test der Bulk-Hours Funktionalität
        function testBulkHours() {
            const results = [];
            
            // Test 1: Apply bulk hours
            results.push("TEST 1: Applying bulk hours Mo-Fr 09:00-18:00");
            
            // Simulate bulk apply
            const testDays = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
            const testTime = '09:00-18:00';
            
            testDays.forEach(day => {
                results.push(`- Setting ${day}: ${testTime}`);
                results.push(`- Activating single toggle for ${day}`);
                results.push(`- Deactivating closed toggle for ${day}`);
            });
            
            // Test 2: Manual checkbox activation
            results.push("\nTEST 2: Manual checkbox activation after bulk apply");
            results.push("- User clicks on Monday 'Durchgehend' checkbox");
            results.push("- Expected: Time should remain 09:00-18:00");
            results.push("- Expected: No reset to default 08:00-17:00");
            
            // Test 3: Verify state persistence
            results.push("\nTEST 3: State persistence check");
            results.push("- All days should show as active");
            results.push("- Times should be preserved");
            results.push("- No unexpected resets");
            
            document.getElementById('test-results').innerText = results.join('\n');
        }
    </script>
</head>
<body style="font-family: Arial, sans-serif; padding: 20px;">
    <h1>Bulk Hours Functionality Test</h1>
    
    <h2>Problem Description:</h2>
    <p>When applying bulk hours (e.g., Mo-Fr 09:00-18:00), the day checkboxes are not automatically activated. 
    When manually activating them afterwards, the times reset to default (08:00-17:00).</p>
    
    <h2>Solution Implemented:</h2>
    <ol>
        <li>applyBulkHours() now automatically activates the "Durchgehend" checkbox for each selected day</li>
        <li>Single-toggle event handler preserves existing times instead of resetting to default</li>
        <li>Closed-toggle event handler checks for existing times before adding default slot</li>
    </ol>
    
    <h2>Test Results:</h2>
    <pre id="test-results" style="background: #f0f0f0; padding: 15px; border-radius: 5px;"></pre>
    
    <button onclick="testBulkHours()" style="background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
        Run Test Simulation
    </button>
    
    <h2>Expected Behavior:</h2>
    <ul>
        <li>✅ Bulk apply sets times AND activates checkboxes</li>
        <li>✅ Manual checkbox changes preserve times</li>
        <li>✅ No unwanted resets to default values</li>
        <li>✅ Seamless user experience</li>
    </ul>
</body>
</html>